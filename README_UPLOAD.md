# Обновление: Загрузка изображений и Mobile-First дизайн

## Новые возможности

### 1. Загрузка изображений с устройства

Теперь в админ-панели можно загружать изображения прямо с вашего устройства:

- **Поддерживаемые форматы**: JPG, JPEG, PNG, GIF, WebP
- **Максимальный размер файла**: 5 МБ
- **Множественная загрузка**: можно загрузить до 10 изображений за раз
- **Предпросмотр**: все загруженные изображения отображаются в предпросмотре
- **Хранение**: файлы сохраняются на сервере в папке `server/uploads/`

#### Как использовать:

1. Откройте форму добавления/редактирования оборудования
2. Найдите раздел "Загрузить изображения с устройства"
3. Нажмите "Выберите файлы" и выберите изображения
4. Изображения автоматически загрузятся на сервер
5. Также можно добавить URL изображений вручную

### 2. Mobile-First дизайн

Весь сайт теперь оптимизирован для мобильных устройств:

#### Главная страница:
- ✅ Адаптивная сетка оборудования (1 колонка на mobile, 2-4 на desktop)
- ✅ Мобильное меню с гамбургер-кнопкой
- ✅ Оптимизированные карточки оборудования

#### Админ-панель:
- ✅ Мобильная навигация с вертикальными кнопками
- ✅ Карточный вид списка оборудования на мобильных
- ✅ Табличный вид на десктопе
- ✅ Адаптивная форма редактирования
- ✅ Удобная загрузка изображений с телефона

#### Особенности mobile-first подхода:
- Все элементы сначала разрабатываются для маленьких экранов
- Затем добавляются breakpoints для больших экранов (sm, md, lg, xl)
- Touch-friendly кнопки и элементы управления
- Оптимизированный размер текста и отступов

## Технические детали

### Серверная часть

#### Новые файлы:
- **server/src/middleware/upload.ts** - middleware для загрузки файлов с multer
- **server/uploads/** - папка для хранения загруженных изображений

#### Новые API endpoints:
```
POST /api/admin/upload - Загрузка изображений
  Headers: Authorization: Bearer {token}
  Body: multipart/form-data
  Field name: images (multiple files)
  Response: { success: true, data: ['url1', 'url2', ...] }
```

#### Обновления:
- Добавлена статическая раздача файлов: `GET /uploads/{filename}`
- Установлен multer для обработки multipart/form-data
- Настроены фильтры файлов (только изображения)
- Ограничение размера файла: 5MB

### Клиентская часть

#### Новые компоненты:
- **ImageUploader.tsx** - компонент для загрузки изображений
  - Поддержка загрузки с устройства
  - Возможность добавления URL вручную
  - Предпросмотр загруженных изображений
  - Индикатор загрузки

#### Обновленные компоненты:
- **EquipmentForm.tsx** - использует новый ImageUploader
- **AdminDashboardPage.tsx** - адаптивный дизайн (таблица на desktop, карточки на mobile)
- **Header.tsx** - мобильное меню (уже было)
- **EquipmentGrid.tsx** - адаптивная сетка (уже было)

#### Tailwind breakpoints:
- **sm**: >= 640px (планшеты портретные)
- **md**: >= 768px (планшеты ландшафт, маленькие ноутбуки)
- **lg**: >= 1024px (ноутбуки)
- **xl**: >= 1280px (десктопы)

## Использование

### Загрузка изображений:

```typescript
// Клиент
const files = e.target.files
const response = await apiClient.uploadImages(Array.from(files))
// response.data содержит массив URL загруженных изображений
```

### Адаптивные классы Tailwind:

```html
<!-- Скрыть на mobile, показать на md и выше -->
<div className="hidden md:block">...</div>

<!-- Показать только на mobile -->
<div className="md:hidden">...</div>

<!-- Адаптивные размеры -->
<h1 className="text-2xl sm:text-3xl">...</h1>

<!-- Адаптивная сетка -->
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3">
```

## Запуск

```bash
# Сервер
npm run dev

# Клиент (в другом терминале)
cd client && npm run dev
```

## Проверка на мобильных устройствах

### Chrome DevTools:
1. Откройте DevTools (F12)
2. Нажмите Toggle Device Toolbar (Ctrl+Shift+M)
3. Выберите мобильное устройство (iPhone, Galaxy и т.д.)

### Реальное устройство:
1. Узнайте IP адрес вашего компьютера (`ipconfig` на Windows или `ifconfig` на Linux/Mac)
2. Запустите vite с флагом `--host`:
   ```bash
   npm run dev -- --host
   ```
3. Откройте на мобильном: `http://{ваш-ip}:5173`

## Важные файлы

- **server/src/middleware/upload.ts** - настройка multer
- **server/src/routes/admin.ts** - endpoint для загрузки
- **client/src/lib/api.ts** - метод uploadImages
- **client/src/components/admin/ImageUploader.tsx** - компонент загрузки
- **client/src/pages/AdminDashboardPage.tsx** - адаптивная админ-панель

## Что проверить

- ✅ Загрузка изображений с телефона/компьютера
- ✅ Предпросмотр изображений после загрузки
- ✅ Сохранение оборудования с загруженными изображениями
- ✅ Отображение изображений в каталоге
- ✅ Работа на разных размерах экрана
- ✅ Мобильная навигация
- ✅ Touch-friendly элементы управления
